<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Swift ç‰ˆ AwesomeMenu çš„æ”¹å†™ä¹‹æ—…:SDiffuseMenu</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="/css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://localhost:4000/2017/01/18/SDiffuseMenu/">
    <link rel="alternate" type="application/rss+xml" title="3è¡Œä»£ç " href="http://localhost:4000/feed.xml ">


<script>
    // ç™¾åº¦ç»Ÿè®¡ä»£ç 
    var _hmt = _hmt || [];
    (function() {
     var hm = document.createElement("script");
     hm.src = "//hm.baidu.com/hm.js?d9432112fb859bf7276f8399641fb0c5";
     var s = document.getElementsByTagName("script")[0];
     s.parentNode.insertBefore(hm, s);
     })();
    </script>




    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-85978943-1', 'auto');
      ga('send', 'pageview');

    </script>

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">3è¡Œä»£ç </a>
        <small>æŠ€æœ¯åšå®¢</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>


                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>Swift ç‰ˆ AwesomeMenu çš„æ”¹å†™ä¹‹æ—…:SDiffuseMenu</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2017-01-18
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>3è¡Œä»£ç 
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">â€¢</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Swift3.0" title="Category: Swift3.0" rel="category">Swift3.0</a>
    
  

  <!-- <span class="point">â€¢</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">â€¢</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#Swift3.0" title="Tag: Swift3.0" rel="tag">Swift3.0</a-->
        <a href="/tag/#Swift3.0" title="Tag: Swift3.0" rel="tag">Swift3.0</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">ç‰ˆæœ¬è®°å½•</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š</a>    <ul>
      <li><a href="#section-2" id="markdown-toc-section-2">1ã€æ·»åŠ åè®®</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">2ã€è®¾ç½®èœå•çš„é€‰é¡¹æŒ‰é’®æ•°æ®</a></li>
      <li><a href="#section-4" id="markdown-toc-section-4">3ã€è®¾ç½®èœå•æŒ‰é’®</a></li>
      <li><a href="#sdiffusemenu" id="markdown-toc-sdiffusemenu">4ã€æ·»åŠ  SDiffuseMenu</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">5ã€åŠ¨ç”»é…ç½®</a></li>
      <li><a href="#section-6" id="markdown-toc-section-6">6ã€åŠ¨ç”»è¿‡ç¨‹ç›‘å¬</a></li>
    </ul>
  </li>
  <li><a href="#swift" id="markdown-toc-swift">äºŒã€Swiftè½¬å†™ä¹‹æ—…</a>    <ul>
      <li><a href="#capropertyanimation" id="markdown-toc-capropertyanimation">1ã€CAPropertyAnimationåŠ¨ç”»</a></li>
      <li><a href="#section-7" id="markdown-toc-section-7">2ã€åŠ¨ç”»åˆ†æ</a>        <ul>
          <li><a href="#section-8" id="markdown-toc-section-8">2.1ã€å•ä¸ªé€‰é¡¹å…³é—­åŠ¨ç”»åˆ†æï¼š</a></li>
          <li><a href="#section-9" id="markdown-toc-section-9">2.2ã€æ•´ä½“åŠ¨ç”»çš„æ§åˆ¶</a></li>
        </ul>
      </li>
      <li><a href="#section-10" id="markdown-toc-section-10">3ã€äº‹ä»¶å“åº”é“¾</a></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>æœ¬åŠ¨ç”»æ˜¯ Swift ç‰ˆçš„ AwesomeMenu,å¦‚éœ€OCç‰ˆè¿˜è¯·ç§»æ­¥<a href="https://github.com/levey/AwesomeMenu">è¿™é‡Œ</a>ã€‚</p>

  <p>SDiffuseMenu å½“å‰ç‰ˆæœ¬ V1.1.0,ä»£ç <a href="https://github.com/mythkiven/DiffuseMenu_Swift">è¯·æˆ³è¿™é‡Œ</a></p>

  <p>æˆ‘æ˜¯åˆšè½¬ Swift ä¸ä¹…,ä»£ç ä¸è¶³ä¹‹å¤„è¿˜è¯·å¤§ç¥å¤šå¤šæŒ‡æ•™ğŸ˜ğŸ˜</p>
</blockquote>

<p><strong>åŠ¨ç”»æ•ˆæœå¦‚ä¸‹:</strong></p>

<p><img src="https://raw.githubusercontent.com/mythkiven/DiffuseMenu_Swift/master/Source/SDiffuseMenu.gif" alt="" /></p>

<p><strong>é…ç½®å›¾å¦‚ä¸‹:</strong></p>

<p><img src="https://raw.githubusercontent.com/mythkiven/DiffuseMenu_Swift/master/Source/settingAngle.png" alt="" /></p>

<h2 id="section">ç‰ˆæœ¬è®°å½•</h2>

<p>SDiffuseMenu å½“å‰ä¸º V1.1.0 ç‰ˆæœ¬,å†å²ç‰ˆæœ¬è¯¦æƒ…<a href="https://github.com/mythkiven/DiffuseMenu_Swift/blob/master/Source/Revision History.md">è¯·æˆ³ä¸€ä¸‹</a></p>

<h2 id="section-1">ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š</h2>

<p>æ·»åŠ åè®®(åŠ¨ç”»çŠ¶æ€å›è°ƒ) -&gt; è®¾ç½®é€‰é¡¹æ•°ç»„ -&gt; è®¾ç½®èœå•æŒ‰é’® -&gt; åŠ¨ç”»å±æ€§é…ç½® -&gt; .addSubview(menu)</p>

<h4 id="section-2">1ã€æ·»åŠ åè®®</h4>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">SDiffuseMenuDelegate</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="o">!</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="section-3">2ã€è®¾ç½®èœå•çš„é€‰é¡¹æŒ‰é’®æ•°æ®</h4>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// åŠ è½½å›¾ç‰‡</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">storyMenuItemImage</span>            <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"menuitem-normal.png"</span><span class="p">)</span>         <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">storyMenuItemImagePressed</span>     <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"menuitem-highlighted.png"</span><span class="p">)</span>    <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">starImage</span>                     <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"star.png"</span><span class="p">)</span>                    <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">starItemNormalImage</span>           <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"addbutton-normal.png"</span><span class="p">)</span>        <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">starItemLightedImage</span>          <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"addbutton-highlighted.png"</span><span class="p">)</span>   <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">starItemContentImage</span>          <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"plus-normal.png"</span><span class="p">)</span>             <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">starItemContentLightedImage</span>   <span class="o">=</span>  <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span><span class="s">"plus-highlighted.png"</span><span class="p">)</span>        <span class="k">else</span> <span class="p">{</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"å›¾ç‰‡åŠ è½½å¤±è´¥"</span><span class="p">)</span> <span class="p">}</span>

<span class="k">var</span> <span class="nv">menus</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SDiffuseMenuItem</span><span class="p">]()</span>

<span class="k">for</span> <span class="n">_</span> <span class="k">in</span> <span class="mi">0</span> <span class="o">..&lt;</span> <span class="mi">6</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">starMenuItem</span> <span class="o">=</span>  <span class="kt">SDiffuseMenuItem</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="n">storyMenuItemImage</span><span class="p">,</span>
                                         <span class="nv">highlightedImage</span><span class="p">:</span> <span class="n">storyMenuItemImagePressed</span><span class="p">,</span> 
                                         <span class="nv">contentImage</span><span class="p">:</span> <span class="n">starImage</span><span class="p">,</span>
                                         <span class="nv">highlightedContentImage</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="n">menus</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">starMenuItem</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="section-4">3ã€è®¾ç½®èœå•æŒ‰é’®</h4>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">startItem</span> <span class="o">=</span> <span class="kt">SDiffuseMenuItem</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="n">starItemNormalImage</span><span class="p">,</span>
                                 <span class="nv">highlightedImage</span><span class="p">:</span> <span class="n">starItemLightedImage</span><span class="p">,</span>
                                 <span class="nv">contentImage</span><span class="p">:</span> <span class="n">starItemContentImage</span><span class="p">,</span>
                                 <span class="nv">highlightedContentImage</span><span class="p">:</span> <span class="n">starItemContentLightedImage</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="sdiffusemenu">4ã€æ·»åŠ  SDiffuseMenu</h4>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">menuRect</span>  <span class="o">=</span> <span class="kt">CGRect</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                           <span class="nv">y</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                           <span class="nv">width</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                           <span class="nv">height</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
<span class="n">menu</span>          <span class="o">=</span>  <span class="kt">SDiffuseMenu</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">menuRect</span><span class="p">,</span>
                          <span class="nv">startItem</span><span class="p">:</span> <span class="n">startItem</span><span class="p">,</span>
                         <span class="nv">menusArray</span><span class="p">:</span> <span class="n">menus</span> <span class="k">as</span> <span class="kt">NSArray</span><span class="p">,</span>
                          <span class="nv">grapyType</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="o">.</span><span class="kt">SDiffuseMenuGrapyType</span><span class="o">.</span><span class="n">arc</span><span class="p">)</span>
<span class="n">menu</span><span class="o">.</span><span class="n">center</span>   <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="n">center</span>
<span class="n">menu</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
<span class="k">self</span><span class="o">.</span><span class="n">menuView</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="section-5">5ã€åŠ¨ç”»é…ç½®</h4>

<ul>
  <li>å¦‚æœé…ç½®å¼§çº¿å½¢åŠ¨ç”»,åˆ™åŠ¨ç”»ä¸­å¼§çº¿åŠå¾„å˜åŒ–ä¸º:0â€“&gt; æœ€å¤§ farRadiusâ€“&gt; æœ€å° nearRadiusâ€“&gt; ç»“æŸ endRadius</li>
  <li>å¦‚æœé…ç½®ç›´çº¿å½¢åŠ¨ç”»,åˆ™åŠ¨ç”»ä¸­åŠå¾„å°±æ˜¯ç›´çº¿æ®µçš„é•¿åº¦,å˜åŒ–ä¸º:0â€“&gt; æœ€å¤§ farRadiusâ€“&gt; æœ€å° nearRadiusâ€“&gt;ç»“æŸ endRadius</li>
</ul>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// åŠ¨ç”»æ—¶é•¿</span>
<span class="n">menu</span><span class="o">.</span><span class="n">animationDuration</span>  <span class="o">=</span> <span class="kt">CFTimeInterval</span><span class="p">(</span><span class="n">animationDrationValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span><span class="p">)</span>
<span class="c1">// æœ€å°åŠå¾„</span>
<span class="n">menu</span><span class="o">.</span><span class="n">nearRadius</span>         <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">nearRadiusValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// ç»“æŸåŠå¾„</span>
<span class="n">menu</span><span class="o">.</span><span class="n">endRadius</span>          <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">endRadiusValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// æœ€å¤§åŠå¾„</span>
<span class="n">menu</span><span class="o">.</span><span class="n">farRadius</span>          <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">farRadiusValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// å•ä¸ªåŠ¨ç”»é—´éš”æ—¶é—´</span>
<span class="n">menu</span><span class="o">.</span><span class="n">timeOffset</span>         <span class="o">=</span> <span class="kt">CFTimeInterval</span><span class="p">(</span><span class="n">timeOffSetValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span><span class="p">)</span><span class="o">!</span>
<span class="c1">// æ•´ä½“è§’åº¦</span>
<span class="n">menu</span><span class="o">.</span><span class="n">menuWholeAngle</span>     <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">menuWholeAngleValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// æ•´ä½“åç§»è§’åº¦</span>
<span class="n">menu</span><span class="o">.</span><span class="n">rotateAngle</span>        <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">rotateAngleValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// å±•å¼€æ—¶è‡ªæ—‹è§’åº¦</span>
<span class="n">menu</span><span class="o">.</span><span class="n">expandRotation</span>     <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span><span class="p">)</span>
<span class="c1">// ç»“æŸæ—¶è‡ªæ—‹è§’åº¦</span>
<span class="n">menu</span><span class="o">.</span><span class="n">closeRotation</span>      <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// æ˜¯å¦æ—‹è½¬èœå•æŒ‰é’®</span>
<span class="n">menu</span><span class="o">.</span><span class="n">rotateAddButton</span>    <span class="o">=</span> <span class="n">rotateAddButton</span><span class="o">.</span><span class="n">isOn</span>
<span class="c1">// èœå•æŒ‰é’®æ—‹è½¬è§’åº¦</span>
<span class="n">menu</span><span class="o">.</span><span class="n">rotateAddButtonAngle</span> <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">((</span><span class="n">rotateAddButtonAngleValue</span><span class="o">.</span><span class="n">text</span><span class="o">!</span> <span class="k">as</span> <span class="kt">NSString</span><span class="p">)</span><span class="o">.</span><span class="n">floatValue</span><span class="p">)</span>
<span class="c1">// èœå•å±•ç¤ºçš„å½¢çŠ¶:ç›´çº¿ or å¼§å½¢</span>
<span class="n">menu</span><span class="o">.</span><span class="n">sDiffuseMenuGrapyType</span> <span class="o">=</span> <span class="n">isLineGrapyType</span><span class="o">.</span><span class="n">isOn</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">?</span> <span class="o">.</span><span class="nv">line</span> <span class="p">:</span> <span class="o">.</span><span class="n">arc</span>

<span class="c1">// ä¸ºæ–¹ä¾¿ä½¿ç”¨,V1.1.0ç‰ˆæœ¬å·²æšä¸¾å¸¸è§æ–¹ä½,å¯ç›´æ¥ä½¿ç”¨,æ— éœ€å†æ¬¡è®¾ç½® rotateAngle &amp;&amp; menuWholeAngle</span>
<span class="c1">// è‹¥å¯¹äº rotateAngle\menuWholeAngle ä¸ç†Ÿæ‚‰,å»ºè®®æŸ¥çœ‹ source ç›®å½•ä¸‹çš„é…ç½®å›¾ç‰‡</span>
<span class="n">menu</span><span class="o">.</span><span class="n">sDiffuseMenuDirection</span> <span class="o">=</span> <span class="o">.</span><span class="n">above</span> <span class="c1">// ä¸Šæ–¹180Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .left // å·¦æ–¹180Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .below // ä¸‹æ–¹180Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .right // å³æ–¹180Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .upperRight // å³ä¸Šæ–¹90Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .lowerRight // å³ä¸‹æ–¹90Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .upperLeft // å·¦ä¸Šæ–¹90Â°</span>
<span class="c1">//        menu.sDiffuseMenuDirection = .lowerLeft // å·¦ä¸‹æ–¹90Â°</span>
</code></pre>
</div>

<h4 id="section-6">6ã€åŠ¨ç”»è¿‡ç¨‹ç›‘å¬</h4>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">func</span> <span class="kt">SDiffuseMenuDidSelectMenuItem</span><span class="p">(</span><span class="n">_</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="p">,</span> <span class="n">didSelectIndex</span> <span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"é€‰ä¸­æŒ‰é’® at index:</span><span class="se">\(</span><span class="n">index</span><span class="se">)</span><span class="s"> is: </span><span class="se">\(</span><span class="n">menu</span><span class="o">.</span><span class="nf">menuItemAtIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="se">)</span><span class="s"> "</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="kt">SDiffuseMenuDidClose</span><span class="p">(</span><span class="n">_</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"èœå•å…³é—­åŠ¨ç”»ç»“æŸ"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="kt">SDiffuseMenuDidOpen</span><span class="p">(</span><span class="n">_</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"èœå•å±•å¼€åŠ¨ç”»ç»“æŸ"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="kt">SDiffuseMenuWillOpen</span><span class="p">(</span><span class="n">_</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"èœå•å°†è¦å±•å¼€"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="kt">SDiffuseMenuWillClose</span><span class="p">(</span><span class="n">_</span> <span class="nv">menu</span><span class="p">:</span> <span class="kt">SDiffuseMenu</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"èœå•å°†è¦å…³é—­"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="swift">äºŒã€Swiftè½¬å†™ä¹‹æ—…</h2>

<p>æ€»çš„æ¥è¯´,åŠ¨ç”»çš„åŸç†è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„,ä¸»è¦æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ˜¯ CABasicAnimationã€CAKeyframeAnimation ä»¥åŠäº‹ä»¶å“åº”é“¾ç›¸å…³çŸ¥è¯†,ä¸‹è¾¹åˆ†ä¸¤éƒ¨åˆ†ä»‹ç»</p>

<h3 id="capropertyanimation">1ã€CAPropertyAnimationåŠ¨ç”»</h3>

<p><img src="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Animation_Types_Timing/Art/animations_info_2x.png" alt="" /></p>

<p>åœ¨ SDiffuseMenu ä¸­åŠ¨ç”»ç”¨ CAPropertyAnimation çš„å­ç±» CABasicAnimation å’Œ CAKeyframeAnimation æ¥å®ç°,å…³äºè¿™ä¸¤ä¸ªå­ç±»ç®€è¿°å¦‚ä¸‹:</p>

<ul>
  <li>CABasicAnimation å…¶å®å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å…³é”®å¸§åŠ¨ç”»,åªæœ‰å¤´å°¾ä¸¤ä¸ªå…³é”®å¸§,å¯å®ç°ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰åŸºæœ¬åŠ¨ç”»;</li>
  <li>CAKeyframeAnimation åˆ™å¯ä»¥æ”¯æŒä»»æ„å¤šä¸ªå…³é”®å¸§,å…³é”®å¸§æœ‰ä¸¤ç§æ–¹å¼æ¥æŒ‡å®š,ä½¿ç”¨pathæˆ–values;</li>
  <li>
    <ul>
      <li>path å¯ä»¥æ˜¯ CGPathRefã€CGMutablePathRef æˆ–è€…è´å¡å°”æ›²çº¿,æ³¨æ„çš„æ˜¯:è®¾ç½®äº† path ä¹‹å values å°±æ— æ•ˆäº†;values åˆ™ç›¸å¯¹çµæ´», å¯ä»¥æŒ‡å®šä»»æ„å…³é”®å¸§å¸§å€¼;</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>keyTimes å¯ä»¥ä¸º values ä¸­çš„å…³é”®å¸§è®¾ç½®ä¸€ä¸€å¯¹åº”å¯¹åº”çš„æ—¶é—´ç‚¹,å…¶å–å€¼èŒƒå›´ä¸º0åˆ°1.0,keyTimes æ²¡æœ‰è®¾ç½®çš„æ—¶å€™,å„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„;</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>..</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>æ›´å¤šçš„åŠ¨ç”»çŸ¥è¯†è¯·æˆ³æ­¤å¤„ <a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514">CoreAnimation_guide</a></p>
  <blockquote>

    <p>ç›¸å…³çš„æŒ‡å—ã€ç¤ºä¾‹ä»£ç å¯ä»¥é€šè¿‡ç‚¹å‡»é¡µé¢å³ä¸Šè§’æœç´¢æŒ‰é’®è¿›è¡Œæœç´¢,å®˜æ–¹æ–‡æ¡£å¤§å¤šç‚¹åˆ°ä¸ºæ­¢,æŒºé€‚åˆå…¥é—¨å­¦ä¹ çš„,æ›´æ·±çš„è¿˜éœ€è¦åœ¨å®è·µä¸­æ‘¸ç´¢æ€»ç»“</p>
  </blockquote>
</blockquote>

<h3 id="section-7">2ã€åŠ¨ç”»åˆ†æ</h3>

<p>åœ¨ V1.1.0 ç‰ˆæœ¬ä¸­,å·²æ‰©å±•åŠ¨ç”»çš„å½¢çŠ¶:æ–°åŠ å…¥ç›´çº¿å‹,å…¶åŸç†åŠè®¡ç®—æ–¹æ³•åŒå¼§çº¿å½¢,ä¸‹æ–‡ä¸åšè¿‡å¤šä»‹ç»,è¯¦æƒ…å‚è§ç‰ˆæœ¬è®°å½•</p>

<p>ä¸è®ºå¤šä¹ˆå¤æ‚çš„åŠ¨ç”»,éƒ½æ˜¯ç”±ç®€å•çš„åŠ¨ç”»ç»„æˆçš„,å¤§å®¶å…ˆçœ‹ä¸‹ SDiffuseMenu ä¸­å•é€‰é¡¹åŠ¨ç”»ï¼š</p>

<p><img src="https://raw.githubusercontent.com/mythkiven/DiffuseMenu_Swift/master/Source/singleItemAnimation.gif" alt="" /></p>

<p>ä»”ç»†åˆ†æå‘ç°å¯ä»¥å°†æ•´ä¸ªåŠ¨ç”»å¯ä»¥æ‹†åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†:</p>

<ul>
  <li>èœå•æŒ‰é’®çš„è‡ªæ—‹è½¬,é€šè¿‡ transform å±æ€§å³å¯å®ç°;</li>
  <li>é€‰é¡¹æŒ‰é’®çš„æ•´ä½“å±•å¼€åŠ¨ç”»,å®é™…æ˜¯åœ¨å®šæ—¶å™¨ä¸­ä¾æ¬¡æ·»åŠ å•ä¸ªé€‰é¡¹æŒ‰é’®çš„åŠ¨ç”»ç»„,æ§åˆ¶ timeInterval æ¥å®ç°åŠ¨ç”»çš„å…ˆåæ‰§è¡Œé¡ºåº;</li>
  <li>å•ä¸ªé€‰é¡¹æŒ‰é’®çš„åŠ¨ç”»åˆ™æ‹†åˆ†ä¸º3éƒ¨åˆ†:å±•å¼€åŠ¨ç”»ã€ç»“æŸåŠ¨ç”»å’Œç‚¹å‡»åŠ¨ç”»,éƒ½æ˜¯åŠ¨ç”»ç»„,ä¸‹è¾¹ä»¥ç»“æŸåŠ¨ç”»ä¸ºä¾‹,ç®€å•ä»‹ç»å…¶å®ç°è¿‡ç¨‹</li>
</ul>

<h4 id="section-8">2.1ã€å•ä¸ªé€‰é¡¹å…³é—­åŠ¨ç”»åˆ†æï¼š</h4>

<p>å•é€‰é¡¹æŒ‰é’®å…³é—­åŠ¨ç”»è¿‡ç¨‹å¦‚ä¸‹:</p>

<p><img src="https://ooo.0o0.ooo/2017/01/20/58817b4e6ba40.png" alt="" /></p>

<p><strong>1ã€è‡ªæ—‹</strong></p>

<p>å¤§å®¶ä»”ç»†çœ‹ä¼šå‘ç°å±•å¼€åŠ¨ç”»å’Œç»“æŸåŠ¨ç”»çš„è‡ªæ—‹è½¬æ˜¯æœ‰å·®å¼‚çš„,å› ä¸ºå…³é”®å¸§è®¾ç½®çš„ä¸åŒ</p>

<p>å±•å¼€åŠ¨ç”»ä¸­è®¾ç½®çš„å…³é”®å¸§å¦‚ä¸‹,0.1å¯¹åº”å±•å¼€è§’åº¦0Â°,0.3å¯¹åº” expandRotation è‡ªæ—‹è§’åº¦,0.4å¯¹åº”0Â°,æ‰€ä»¥åœ¨0.3 -&gt; 0.4çš„æ—¶é—´ä¼šå‡ºç°è¾ƒå¿«é€Ÿçš„è‡ªæ—‹</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="n">rotateAnimation</span><span class="o">.</span><span class="n">values</span>   <span class="o">=</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
                           <span class="kt">CGFloat</span><span class="p">(</span><span class="n">expandRotation</span><span class="p">),</span>
                           <span class="kt">CGFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)]</span>

<span class="n">rotateAnimation</span><span class="o">.</span><span class="n">keyTimes</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.1</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">),</span>
                           <span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.3</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">),</span>
                           <span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.4</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">)]</span>
</code></pre>
</div>

<p>è€Œå…³é—­çš„åŠ¨ç”»ä¸­,è®¾ç½®ä¸º0 -&gt; 0.4 æ…¢é€Ÿè‡ªæ—‹,0.4 -&gt; 0.5 å¿«é€Ÿè‡ªæ—‹</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="n">rotateAnimation</span><span class="o">.</span><span class="n">values</span>   <span class="o">=</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
                           <span class="kt">CGFloat</span><span class="p">(</span><span class="n">closeRotation</span><span class="p">),</span>
                           <span class="kt">CGFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)]</span>

<span class="n">rotateAnimation</span><span class="o">.</span><span class="n">keyTimes</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.0</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">),</span>
                           <span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.4</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">),</span>
                           <span class="kt">NSNumber</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mf">0.5</span> <span class="k">as</span> <span class="kt">Float</span><span class="p">)]</span>
</code></pre>
</div>

<p><strong>2ã€ç§»åŠ¨</strong></p>

<p>ç§»åŠ¨çš„æ§åˆ¶åœ¨äº path æ˜¯æ€æ ·è®¾å®šçš„,ä»£ç ä¸­æˆ‘å†™äº†ä¸¤ç§æ–¹æ³•,å…¶ä¸­ä¸€ç§è¢«æ³¨é‡Šæ‰</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">positionAnimation</span>      <span class="o">=</span>  <span class="kt">CAKeyframeAnimation</span><span class="p">(</span><span class="nv">keyPath</span><span class="p">:</span> <span class="s">"position"</span><span class="p">)</span>
<span class="n">positionAnimation</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">animationDuration</span>
</code></pre>
</div>

<p>1)\ä½¿ç”¨è´å¡å°”æ›²çº¿ä½œä¸º path,ä»ä»£ç ä¸­å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºç§»åŠ¨çš„è·¯å¾„: endPoint -&gt; farPoint -&gt; startPoint</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="kt">UIBezierPath</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
<span class="n">path</span><span class="o">.</span><span class="nf">move</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">endPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">endPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">path</span><span class="o">.</span><span class="nf">addLine</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">farPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">farPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">path</span><span class="o">.</span><span class="nf">addLine</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">startPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">startPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">positionAnimation</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">cgPath</span>
</code></pre>
</div>

<p>2)\ä½¿ç”¨ CGPathRef æˆ– GCMutablePathRef è®¾ç½®è·¯å¾„</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">path</span> <span class="o">=</span>  <span class="kt">CGMutablePath</span><span class="p">()</span>
<span class="n">path</span><span class="o">.</span><span class="nf">move</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">endPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">endPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">path</span><span class="o">.</span><span class="nf">addLine</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">farPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">farPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">path</span><span class="o">.</span><span class="nf">addLine</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">startPoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">startPoint</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="n">positionAnimation</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
</code></pre>
</div>

<p>è‡ªæ—‹å’Œå¹³ç§»éƒ½æœ‰äº†,æ¥ä¸‹æ¥è¦åŠ å…¥åˆ°åŠ¨ç”»ç»„ä¸­ï¼š</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="nv">animationgroup</span>              <span class="o">=</span>  <span class="kt">CAAnimationGroup</span><span class="p">()</span>
<span class="n">animationgroup</span><span class="o">.</span><span class="n">animations</span>       <span class="o">=</span> <span class="p">[</span><span class="n">positionAnimation</span><span class="p">,</span> <span class="n">rotateAnimation</span><span class="p">]</span>
<span class="n">animationgroup</span><span class="o">.</span><span class="n">duration</span>         <span class="o">=</span> <span class="n">animationDuration</span>
<span class="c1">// åŠ¨ç”»ç»“æŸå,layerä¿æŒæœ€ç»ˆçš„çŠ¶æ€</span>
<span class="n">animationgroup</span><span class="o">.</span><span class="n">fillMode</span>         <span class="o">=</span> <span class="n">kCAFillModeForwards</span>
<span class="c1">// é€Ÿåº¦æ§åˆ¶æˆ‘è®¾ç½®çš„å¦‚æ­¤,å¤§å®¶æ ¹æ®éœ€è¦è‡ªè¡Œä¿®æ”¹å³å¯</span>
<span class="n">animationgroup</span><span class="o">.</span><span class="n">timingFunction</span>   <span class="o">=</span> <span class="kt">CAMediaTimingFunction</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span><span class="n">kCAMediaTimingFunctionEaseIn</span><span class="p">)</span>
<span class="c1">// ä»£ç†æ˜¯ä¸ºäº†è·å–åˆ°åŠ¨ç”»ç»“æŸçš„ä¿¡å·</span>
<span class="n">animationgroup</span><span class="o">.</span><span class="n">delegate</span>         <span class="o">=</span> <span class="k">self</span>
</code></pre>
</div>

<p>æœ€æ·»åŠ è¿› layer å³å¯</p>
<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="n">item</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">animationgroup</span><span class="p">,</span><span class="nv">forKey</span><span class="p">:</span> <span class="s">"Close"</span><span class="p">)</span>
</code></pre>
</div>
<p>å…¶ä½™çš„åŠ¨ç”»åŸç†å’Œä¸Šè¿°çš„å…³é—­åŠ¨ç”»å…¶å®æ˜¯ä¸€æ ·çš„,åŸºäºå±æ€§çš„åŠ¨ç”»,é€šè¿‡æ“ä½œå¸§æ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ,å°ä¼™ä¼´ä»¬ç›´æ¥çœ‹ä»£ç å§~</p>

<h4 id="section-9">2.2ã€æ•´ä½“åŠ¨ç”»çš„æ§åˆ¶</h4>

<p>æ³¨æ„,æ•´ä½“åŠ¨ç”»çš„æ§åˆ¶ä»¥ä¸Šå¹¶æœªè¡¨è¿°,åœ¨è¿™ä¸ªåœ°æ–¹ä¹Ÿéœ€è¦æ³¨æ„ä¸‹,ä¸ºäº†è®©æ•´ä½“åŠ¨ç”»åœ¨ä¸€ä¸ªåˆé€‚çš„è§’åº¦å±•ç¤ºå‡ºæ¥,å°±éœ€è¦ä»æ•´ä½“ä¸Šæ§åˆ¶è§’åº¦</p>

<p><img src="https://ooo.0o0.ooo/2017/01/16/587c8c512c911.png" alt="" />
<img src="https://ooo.0o0.ooo/2017/01/16/587c8c7530072.png" alt="" />
<img src="https://ooo.0o0.ooo/2017/01/16/587c8c8635998.png" alt="" /></p>

<p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡º,æ•´ä½“çš„è§’åº¦æ˜¯ç”± menuWholeAngle å’Œ rotateAngle å…±åŒæ§åˆ¶çš„</p>

<ul>
  <li>menuWholeAngle: æ§åˆ¶æ•´ä½“åŠ¨ç”»çš„èŒƒå›´è§’åº¦;</li>
  <li>rotateAngle: ç”¨äºæ§åˆ¶æ•´ä½“çš„åç§»è§’åº¦</li>
</ul>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£æ•´ä½“è§’åº¦çš„æ§åˆ¶,æˆ‘ä»¥ç»“æŸä½ç½®ä¸ºä¾‹ç”»äº†CADå›¾,å¦‚ä¸‹:
<img src="https://ooo.0o0.ooo/2017/01/18/587ed1cc7e674.png" alt="" />
æé†’:ä¸‹æ–‡æ‰€è¿°çš„åæ ‡è®¡ç®—éƒ½æ˜¯åŸºäºç¬›å¡å„¿åæ ‡ç³»,æ³¨æ„ä¸UIKitä¸­åæ ‡ç³»çš„å¼‚åŒã€‚</p>

<p>å…³äºä¸Šå›¾,è¯´æ˜å¦‚ä¸‹:</p>
<ul>
  <li>1ã€å›¾ä¸­æœ‰5ä¸ªé€‰é¡¹æŒ‰é’®å’Œä¸€ä¸ªèœå•æŒ‰é’®,æ•´ä½“è§’åº¦æ˜¯ menuWholeAngle,é€‰é¡¹ä¸­å¿ƒå¤¹è§’Î²(è§ä»£ç æ³¨é‡Š);</li>
  <li>2ã€å‡è®¾åç§»è§’åº¦ rotateAngle=0,åˆ™ä»¥çº¢è‰²çº¿ä¸ºåæ ‡è½´XY,ä¸‹æ–‡å…ˆä»¥æ­¤ä¸ºå‡†è¿›è¡Œåæ ‡è®¡ç®—;</li>
  <li>3ã€å‡è®¾æ•´ä½“åç§»è§’åº¦ rotateAngle!=0,é‚£ä¹ˆä»¥ç»¿ä¸ºåæ ‡è½´XY,å…¶ä¸­åç§»è§’åº¦å°±æ˜¯ rotateAngle</li>
</ul>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// </span>
<span class="c1">// Î² = ti * menuWholeAngle / icount - CGFloat(1.0)</span>
<span class="c1">// Î² æ˜¯ä¸¤ä¸ªé€‰é¡¹æŒ‰é’®çš„ä¸­å¿ƒå¤¹è§’</span>
<span class="c1">// è®¡ç®— Î² æ­£å¼¦ä½™å¼¦å€¼</span>
<span class="k">let</span> <span class="nv">sinValue</span>  <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="nf">sinf</span><span class="p">(</span><span class="kt">Float</span><span class="p">(</span><span class="n">ti</span> <span class="o">*</span> <span class="n">menuWholeAngle</span> <span class="o">/</span> <span class="n">icount</span> <span class="o">-</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))))</span>
<span class="k">let</span> <span class="nv">cosValue</span>  <span class="o">=</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="nf">cosf</span><span class="p">(</span><span class="kt">Float</span><span class="p">(</span><span class="n">ti</span> <span class="o">*</span> <span class="n">menuWholeAngle</span> <span class="o">/</span> <span class="n">icount</span> <span class="o">-</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">)))</span>

<span class="c1">// ç»“æŸç‚¹åæ ‡</span>
<span class="k">var</span> <span class="nv">x</span>         <span class="o">=</span> <span class="n">startPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="n">endRadius</span><span class="p">)</span> <span class="o">*</span> <span class="n">sinValue</span>
<span class="k">var</span> <span class="nv">y</span>         <span class="o">=</span> <span class="p">(</span><span class="kt">CGFloat</span><span class="p">(</span><span class="n">startPoint</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="n">endRadius</span> <span class="o">*</span> <span class="n">cosValue</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">endPoint</span>  <span class="o">=</span>  <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span><span class="nv">y</span><span class="p">:</span> <span class="n">y</span><span class="p">)</span>
<span class="n">item</span><span class="o">.</span><span class="n">endPoint</span> <span class="o">=</span> <span class="n">endPoint</span> <span class="c1">// _rotateCGPointAroundCenter(endPoint, center: startPoint, angle: rotateAngle)</span>

<span class="c1">// æœ€è¿‘ç‚¹åæ ‡,è®¡ç®—æ–¹æ³•åŒCADå›¾ä¸­çš„ç»“æŸç‚¹åæ ‡</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">startPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">nearRadius</span> <span class="o">*</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="n">sinValue</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">startPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">nearRadius</span> <span class="o">*</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="n">cosValue</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">nearPoint</span>  <span class="o">=</span>  <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">y</span><span class="p">)</span>
<span class="n">item</span><span class="o">.</span><span class="n">nearPoint</span> <span class="o">=</span> <span class="n">nearPoint</span> <span class="c1">// _rotateCGPointAroundCenter(nearPoint, center: startPoint, angle: rotateAngle)</span>

<span class="c1">// æœ€è¿œç‚¹åæ ‡,è®¡ç®—æ–¹æ³•åŒCADå›¾ä¸­çš„ç»“æŸç‚¹åæ ‡</span>
<span class="k">let</span> <span class="nv">farPoint</span>   <span class="o">=</span>  <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">startPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">farRadius</span> <span class="o">*</span> <span class="n">sinValue</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">startPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">farRadius</span> <span class="o">*</span> <span class="n">cosValue</span><span class="p">)</span>
<span class="n">item</span><span class="o">.</span><span class="n">farPoint</span>  <span class="o">=</span> <span class="n">farPoint</span> <span class="c1">//  _rotateCGPointAroundCenter(farPoint, center: startPoint, angle: rotateAngle)</span>
</code></pre>
</div>

<p>OK,ä¸Šè¾¹è®¡ç®—äº†æ¯ä¸ªé€‰é¡¹çš„åæ ‡,ä»è€Œç¡®å®šäº†æ¯ä¸ªé€‰é¡¹çš„ end åæ ‡,å¯ä»¥å®ç°ä¸€ä¸ªæ•´ä½“çš„åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯,è¯·æ³¨æ„,ä¸Šè¾¹æˆ‘æ³¨é‡Šäº†å¯¹ â€˜_rotateCGPointAroundCenter â€˜çš„è°ƒç”¨,ä½¿å¾—åŠ¨ç”»çš„æ•´ä½“åç§»è§’åº¦ä¸º0ã€‚å¦‚æœæ”¾å¼€æ³¨é‡Š,ç»“æœä¼šæ€æ ·ï¼Ÿ</p>

<p>æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ•ˆæœæ˜¯å¯ä»¥å›´ç»•èœå•é€‰é¡¹å±•å¼€ä»»æ„è§’åº¦çš„æ•´ä½“åŠ¨ç”»,é‚£ä¹ˆåªéœ€è¦åœ¨ä»¥ä¸Šçš„åŸºç¡€,åŠ ä¸Šåæ ‡è½´ç³»çš„æ—‹è½¬å³å¯ã€‚è¯·çœ‹ä¸Šå›¾çš„ç»¿è‰²çº¿,å‡è®¾å…¶ä¸ºæ–°çš„åæ ‡ç³»,è®©çº¢è‰²åæ ‡ç³»ç»•å…¶æ—‹è½¬ rotateAngle,å°±ç›¸å½“äºé€‰é¡¹æŒ‰é’®æ•´ä½“åç§» rotateAngle,è¿™æ ·å°±å¯ä»¥åšåˆ°ä»»æ„æ–¹å‘çš„åŠ¨ç”»,å¦‚ä¸‹å›¾:</p>

<p><img src="https://ooo.0o0.ooo/2017/01/18/587ed9a01719d.png" alt="" />
åç§»ä»£ç å¦‚ä¸‹:</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">_rotateCGPointAroundCenter</span><span class="p">(</span> <span class="n">_</span> <span class="nv">point</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">,</span> <span class="nv">center</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">,</span> <span class="nv">angle</span><span class="p">:</span> <span class="kt">CGFloat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CGPoint</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">translation</span>     <span class="o">=</span> <span class="kt">CGAffineTransform</span><span class="p">(</span><span class="nv">translationX</span><span class="p">:</span> <span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">rotation</span>        <span class="o">=</span> <span class="kt">CGAffineTransform</span><span class="p">(</span><span class="nv">rotationAngle</span><span class="p">:</span> <span class="n">angle</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">transformGroup</span>  <span class="o">=</span> <span class="n">translation</span><span class="o">.</span><span class="nf">inverted</span><span class="p">()</span><span class="o">.</span><span class="nf">concatenating</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span><span class="o">.</span><span class="nf">concatenating</span><span class="p">(</span><span class="n">translation</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">point</span><span class="o">.</span><span class="nf">applying</span><span class="p">(</span><span class="n">transformGroup</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p>é‚£äº›çœ‹ä¼¼å¤æ‚çš„åŠ¨ç”»,ä½†å¦‚æœç»†ç»†åˆ†æ,å…¶å®ä¹Ÿä¸éš¾å“¦~</p>

<h3 id="section-10">3ã€äº‹ä»¶å“åº”é“¾</h3>

<p>å…¶å®è¿™é‡Œå¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ hitTest å¯»æ‰¾å“åº” View,è€Œæ˜¯åœ¨ä¸¤å¤„ä½¿ç”¨ç›¸å…³çš„çŸ¥è¯†</p>

<p><strong>3.1ã€åˆ©ç”¨â€™point(inside point: CGPoint, with event: UIEvent?) -&gt; Boolâ€™æ¥æ§åˆ¶ touch äº‹ä»¶çš„åˆ†å‘</strong></p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">override</span> <span class="kd">func</span> <span class="nf">point</span><span class="p">(</span><span class="n">inside</span> <span class="nv">point</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">,</span> <span class="n">with</span> <span class="nv">event</span><span class="p">:</span> <span class="kt">UIEvent</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="c1">// åŠ¨ç”»ä¸­ç¦æ­¢ touch</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_isAnimating</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
    <span class="c1">// å±•å¼€æ—¶å¯ä»¥ touch ä»»æ„æŒ‰é’®</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="kc">true</span> <span class="o">==</span> <span class="n">expanding</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span> 
    <span class="c1">// é™¤ä¸Šè¿°æƒ…å†µå¤–,ä»…èœå•æŒ‰é’®å¯ç‚¹å‡»</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">_startButton</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p><strong>3.2ã€å¢å¤§æŒ‰é’®çš„ç‚¹å‡»åŒºåŸŸ</strong></p>

<p>åœ¨OCä¸­,ç»å¸¸é‡åˆ°æ”¾å¤§æŒ‰é’®ç‚¹å‡»åŒºåŸŸæˆ–è€…é™åˆ¶ touch åŒºåŸŸçš„é—®é¢˜,ä¸€èˆ¬å¯ä»¥é€šè¿‡è®¾ç½® frame æˆ–è€…åˆ©ç”¨ hitTest å¤„ç†,åœ¨ Swift ä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚åœ¨ SDiffuseMenu ä¸­,å¯¹äºç‚¹å‡»èŒƒå›´çš„å¤„ç†å¦‚ä¸‹:</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code> <span class="k">override</span> <span class="kd">func</span> <span class="nf">touchesEnded</span><span class="p">(</span><span class="n">_</span> <span class="nv">touches</span><span class="p">:</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">UITouch</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">with</span> <span class="nv">event</span><span class="p">:</span> <span class="kt">UIEvent</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">isHighlighted</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="k">let</span> <span class="nv">location</span> <span class="o">=</span> <span class="p">((</span><span class="n">touches</span> <span class="k">as</span> <span class="kt">NSSet</span><span class="p">)</span><span class="o">.</span><span class="nf">anyObject</span><span class="p">()</span><span class="o">!</span> <span class="k">as</span> <span class="kt">AnyObject</span><span class="p">)</span><span class="o">.</span><span class="nf">location</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span> <span class="c1">// ç‚¹å‡»èŒƒå›´</span>
    <span class="k">if</span> <span class="p">(</span><span class="kt">SDiffuseMenuItem</span><span class="o">.</span><span class="kt">ScaleRect</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span> <span class="nv">n</span><span class="p">:</span> <span class="n">kDiffuseMenuItemDefaultTouchRange</span><span class="p">)</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">location</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">delegate</span><span class="p">?</span><span class="o">.</span><span class="kt">SDiffuseMenuItemTouchesEnd</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="kd">func</span> <span class="kt">ScaleRect</span><span class="p">(</span> <span class="n">_</span> <span class="nv">rect</span><span class="p">:</span><span class="kt">CGRect</span><span class="p">,</span> <span class="nv">n</span><span class="p">:</span><span class="kt">CGFloat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CGRect</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">x</span>       <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">let</span> <span class="nv">y</span>       <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">let</span> <span class="nv">width</span>   <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">n</span>
    <span class="k">let</span> <span class="nv">height</span>  <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">n</span>
    
    <span class="k">return</span> <span class="kt">CGRect</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">x</span> <span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">y</span> <span class="p">,</span><span class="nv">width</span><span class="p">:</span> <span class="n">width</span> <span class="p">,</span><span class="nv">height</span><span class="p">:</span> <span class="n">height</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">// å…¶ä¸­ScaleRectæ–¹æ³•çš„playgroundç‰ˆè§ä¸‹å›¾</span>

<span class="c1">// å¢å¤§ç‚¹å‡»èŒƒå›´,è¿˜å¯ä»¥åœ¨pointæ–¹æ³•ä¸­åˆ¤æ–­,ä¸è¿‡å°±éœ€è¦SDiffuseMenu.swiftè·Ÿç€è°ƒæ•´äº†</span>
</code></pre>
</div>
<p>ä¸‹å›¾æ˜¯ScaleRectæ–¹æ³•å°æµ‹è¯•,çœ‹ç€æ˜¯ä¸æ˜¯å¾ˆå¥½ç”¨å•ŠğŸ˜ğŸ˜</p>

<p><img src="https://ooo.0o0.ooo/2017/01/18/587f06c314ded.png" alt="" /></p>


        </article>
        <hr>

        
        
            
            
                
                    
                        
                        <h2 id="similar_posts">ç›¸ä¼¼æ–‡ç« </h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/11/swift_X_Initialization_Deinitialization/">Swift3.0_X_æ„é€ è¿‡ç¨‹å’Œææ„è¿‡ç¨‹ 
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/10/swift_IX_Methods_Subscripts_Inheritance/">Swift3.0_IX_æ–¹æ³•ã€ä¸‹æ ‡å’Œç»§æ‰¿ 
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/08/swift_VIII_Enumerations_Classes_Structures_Properties/">Swift3.0_VIII_æšä¸¾ã€ç±»ã€ç»“æ„ä½“ã€å±æ€§
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/07/swift_VII_Closures/">Swift3.0_VII_é—­åŒ…
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/05/swift_VI_Functions/">Swift3.0_VI_å‡½æ•°
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2016/12/03/swift_V_Control-Flow/">Swift3.0_V_æ§åˆ¶æµ
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>ä¸Šä¸€ç¯‡</strong> <a href="/2016/12/11/swift_X_Initialization_Deinitialization/">Swift3.0_X_æ„é€ è¿‡ç¨‹å’Œææ„è¿‡ç¨‹ </a></p>
        
    </div>
    <div class="nex">

        
    </div>
</div>


        <h2 id="comments">è¯„è®º</h2>
        
<!-- å¤šè¯´è¯„è®ºæ¡† start -->
<div class="ds-thread" data-thread-key="http://localhost:4000/2017/01/18/SDiffuseMenu/" data-title="Swift ç‰ˆ AwesomeMenu çš„æ”¹å†™ä¹‹æ—…:SDiffuseMenu" data-url="http://localhost:4000/2017/01/18/SDiffuseMenu/"></div>
<!-- å¤šè¯´è¯„è®ºæ¡† end -->
<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
    var duoshuoQuery = {
        short_name: "mythkiven"
    };
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->






    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    å†…å®¹
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#similar_posts">ç›¸ä¼¼æ–‡ç« </a></li>
                    <li><a href="#comments">è¯„è®º</a></li>
                </ul>
            </div>
            <!-- å…¶ä»–divæ¡†æ”¾åˆ°è¿™é‡Œ -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             3è¡Œä»£ç çš„æŠ€æœ¯åšå®¢ 
        </p>
        <p class="contact">
            Contact me at:  
            <a href="mailto:mythziven@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>   -->
<!--            <a href="mailto:mythziven@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>-->
<!--            <a href="mailto:mythziven@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        -->


        </p>
        <p>
            æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ï¼Œæœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ï¼Œæœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>æ¬¡
        </p>
        <p class="power">
        
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>

          <!--   <span>
                Theme designed by <a href="https://github.com/mythkiven">MyKiven</a>.
            </span> -->

        </p>
    </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
